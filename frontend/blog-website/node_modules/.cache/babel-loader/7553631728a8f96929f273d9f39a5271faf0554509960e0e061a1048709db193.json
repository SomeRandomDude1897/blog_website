{"ast":null,"code":"import{useState,useContext}from\"react\";import{AuthContext}from\"./context/AuthProvider\";import\"./styles/Login.css\";import axios from\"axios\";import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LoginComponent=props=>{const{auth,setAuth}=useContext(AuthContext);const[login,setLogin]=useState(\"\");const[password,setPassword]=useState(\"\");const[authStatus,setAuthStatus]=useState(\"\");const[rememberMe,setRememberMe]=useState(false);const navigate=useNavigate();const checkLogin=async e=>{e.preventDefault();const response=await axios.post(props.api_url,{username:login,password:password,remember_me:rememberMe});if(response!==null&&response!==void 0&&response.data[\"successful\"]){setAuthStatus(\"Success\");setAuth({user:response.data[\"user_info\"],user_data:response.data[\"user_data\"]});if(rememberMe){localStorage.setItem(\"authToken\",response.data[\"auth_token\"]);}navigate(\"/account\");}else{setAuthStatus(\"Fail\");}setLogin(\"\");setPassword(\"\");};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:checkLogin,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"loginInput\",children:\" \\u041B\\u043E\\u0433\\u0438\\u043D: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"loginInput\",placeholder:\"\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043B\\u043E\\u0433\\u0438\\u043D\",onChange:e=>{setLogin(e.target.value);},value:login,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"loginInput\",children:\" \\u041F\\u0430\\u0440\\u043E\\u043B\\u044C: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"loginInput\",placeholder:\"\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",onChange:e=>{setPassword(e.target.value);},value:password,required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rememberMeCheckBox\",children:\" \\u0417\\u0430\\u043F\\u043E\\u043C\\u043D\\u0438\\u0442\\u044C \\u043C\\u0435\\u043D\\u044F: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"rememberMeCheckBox\",onChange:e=>{setRememberMe(e.target.checked);}})]}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(Link,{className:\"create-accout-link\",to:\"/register\",children:\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0440\\u044F\\u043C\\u043E \\u0441\\u0435\\u0439\\u0447\\u0430\\u0441!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{style:{color:authStatus==\"Success\"?\"rgb(41, 201, 76)\":\"rgb(168, 33, 23)\"},className:\"login-incorrect\",children:authStatus==\"Success\"?\"Авторизация успешна, возвращаемся на предыдущую страницу...\":authStatus==\"Fail\"?\"Некорректный логин или пароль!\":\"\"})]})});};export default LoginComponent;","map":{"version":3,"names":["useState","useContext","AuthContext","axios","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginComponent","props","auth","setAuth","login","setLogin","password","setPassword","authStatus","setAuthStatus","rememberMe","setRememberMe","navigate","checkLogin","e","preventDefault","response","post","api_url","username","remember_me","data","user","user_data","localStorage","setItem","children","className","onSubmit","htmlFor","type","id","placeholder","onChange","target","value","required","checked","to","style","color"],"sources":["/media/starrynight/main_pt/projects_linux/blog_website/frontend/blog-website/src/LoginComponent.js"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { AuthContext } from \"./context/AuthProvider\";\nimport \"./styles/Login.css\";\nimport axios from \"axios\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nconst LoginComponent = (props) => {\n  const { auth, setAuth } = useContext(AuthContext);\n\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [authStatus, setAuthStatus] = useState(\"\");\n  const [rememberMe, setRememberMe] = useState(false);\n  const navigate = useNavigate();\n\n  const checkLogin = async (e) => {\n    e.preventDefault();\n    const response = await axios.post(props.api_url, {\n      username: login,\n      password: password,\n      remember_me: rememberMe,\n    });\n    if (response?.data[\"successful\"]) {\n      setAuthStatus(\"Success\");\n      setAuth({\n        user: response.data[\"user_info\"],\n        user_data: response.data[\"user_data\"],\n      });\n      if (rememberMe) {\n        localStorage.setItem(\"authToken\", response.data[\"auth_token\"]);\n      }\n      navigate(\"/account\");\n    } else {\n      setAuthStatus(\"Fail\");\n    }\n    setLogin(\"\");\n    setPassword(\"\");\n  };\n\n  return (\n    <>\n      <form className=\"login-form\" onSubmit={checkLogin}>\n        <label htmlFor=\"loginInput\"> Логин: </label>\n        <input\n          type=\"text\"\n          id=\"loginInput\"\n          placeholder=\"введите ваш логин\"\n          onChange={(e) => {\n            setLogin(e.target.value);\n          }}\n          value={login}\n          required\n        />\n        <label htmlFor=\"loginInput\"> Пароль: </label>\n        <input\n          type=\"password\"\n          id=\"loginInput\"\n          placeholder=\"введите ваш пароль\"\n          onChange={(e) => {\n            setPassword(e.target.value);\n          }}\n          value={password}\n          required\n        ></input>\n        <div className=\"checkbox-block\">\n          <label htmlFor=\"rememberMeCheckBox\"> Запомнить меня: </label>\n          <input\n            type=\"checkbox\"\n            id=\"rememberMeCheckBox\"\n            onChange={(e) => {\n              setRememberMe(e.target.checked);\n            }}\n          ></input>\n        </div>\n        <button>Войти</button>\n        <Link className=\"create-accout-link\" to=\"/register\">\n          Нет аккаунта? Создайте прямо сейчас!\n        </Link>\n        <br />\n        <div\n          style={{\n            color:\n              authStatus == \"Success\" ? \"rgb(41, 201, 76)\" : \"rgb(168, 33, 23)\",\n          }}\n          className=\"login-incorrect\"\n        >\n          {authStatus == \"Success\"\n            ? \"Авторизация успешна, возвращаемся на предыдущую страницу...\"\n            : authStatus == \"Fail\"\n            ? \"Некорректный логин или пароль!\"\n            : \"\"}\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default LoginComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}