{"ast":null,"code":"import{useContext,useState}from\"react\";import\"./styles/Registration.css\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{AuthContext}from\"./context/AuthProvider\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RegisterForm=props=>{var _auth$user;const{auth,setAuth}=useContext(AuthContext);const[login,setLogin]=useState(\"\");const[password,setPassword]=useState(\"\");const[repeatPassword,setRepeatPassword]=useState(\"\");const[authStatus,setAuthStatus]=useState(\"\");const[email,setEmail]=useState(\"\");const navigate=useNavigate();if(auth!==null&&auth!==void 0&&(_auth$user=auth.user)!==null&&_auth$user!==void 0&&_auth$user.id){navigate(\"/account\");}function Register(event){const setRegister=async()=>{const response=await axios.post(props.api_url+\"register\",{username:login,email:email,password:password});if(response.data==\"user successfully created\"){setAuthStatus(\"Аккаунт создан, перенаправление на страницу входа\");navigate(\"/login\");}else if(response.data==\"email already in use\"){setAuthStatus(\"Email уже используется на сайте\");}else if(response.data==\"username already in use\"){setAuthStatus(\"Пользователь с таким логином уже существует, придуймайте другой\");}else{setAuthStatus(\"Не удалось создать аккаунт, попробуйте позже\");}setLogin(\"\");setRepeatPassword(\"\");setEmail(\"\");setPassword(\"\");};event.preventDefault();if(password!=repeatPassword){setAuthStatus(\"Введенные пароли не совпадают!\");}else{setRegister();}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:Register,children:[/*#__PURE__*/_jsx(\"label\",{children:\" Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"registerLoginInput\",placeholder:\"\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u044D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0443\\u044E \\u043F\\u043E\\u0447\\u0442\\u0443\",onChange:e=>{setEmail(e.target.value);},value:email,required:true}),/*#__PURE__*/_jsx(\"label\",{children:\" \\u041B\\u043E\\u0433\\u0438\\u043D: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"registerLoginInput\",placeholder:\"\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043B\\u043E\\u0433\\u0438\\u043D\",onChange:e=>{setLogin(e.target.value);},value:login,required:true}),/*#__PURE__*/_jsx(\"label\",{children:\" \\u041F\\u0430\\u0440\\u043E\\u043B\\u044C: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"registePasswordInput\",placeholder:\"\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",onChange:e=>{setPassword(e.target.value);},value:password,required:true}),/*#__PURE__*/_jsx(\"label\",{children:\" \\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"registePasswordInput\",placeholder:\"\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u043D\\u043E\",onChange:e=>{setRepeatPassword(e.target.value);},value:repeatPassword,required:true}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{children:authStatus})]})});};export default RegisterForm;","map":{"version":3,"names":["useContext","useState","useNavigate","axios","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RegisterForm","props","_auth$user","auth","setAuth","login","setLogin","password","setPassword","repeatPassword","setRepeatPassword","authStatus","setAuthStatus","email","setEmail","navigate","user","id","Register","event","setRegister","response","post","api_url","username","data","preventDefault","children","className","onSubmit","type","placeholder","onChange","e","target","value","required"],"sources":["/media/starrynight/main_pt/projects_linux/blog_website/frontend/blog-website/src/RegisterForm.js"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport \"./styles/Registration.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AuthContext } from \"./context/AuthProvider\";\n\nconst RegisterForm = (props) => {\n  const { auth, setAuth } = useContext(AuthContext);\n\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [repeatPassword, setRepeatPassword] = useState(\"\");\n  const [authStatus, setAuthStatus] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const navigate = useNavigate();\n\n  if (auth?.user?.id) {\n    navigate(\"/account\");\n  }\n\n  function Register(event) {\n    const setRegister = async () => {\n      const response = await axios.post(props.api_url + \"register\", {\n        username: login,\n        email: email,\n        password: password,\n      });\n      if (response.data == \"user successfully created\") {\n        setAuthStatus(\"Аккаунт создан, перенаправление на страницу входа\");\n        navigate(\"/login\");\n      } else if (response.data == \"email already in use\") {\n        setAuthStatus(\"Email уже используется на сайте\");\n      } else if (response.data == \"username already in use\") {\n        setAuthStatus(\n          \"Пользователь с таким логином уже существует, придуймайте другой\"\n        );\n      } else {\n        setAuthStatus(\"Не удалось создать аккаунт, попробуйте позже\");\n      }\n      setLogin(\"\");\n      setRepeatPassword(\"\");\n      setEmail(\"\");\n      setPassword(\"\");\n    };\n\n    event.preventDefault();\n    if (password != repeatPassword) {\n      setAuthStatus(\"Введенные пароли не совпадают!\");\n    } else {\n      setRegister();\n    }\n  }\n\n  return (\n    <>\n      <form className=\"register-form\" onSubmit={Register}>\n        <label> Email: </label>\n        <input\n          type=\"email\"\n          id=\"registerLoginInput\"\n          placeholder=\"введите электронную почту\"\n          onChange={(e) => {\n            setEmail(e.target.value);\n          }}\n          value={email}\n          required\n        />\n        <label> Логин: </label>\n        <input\n          type=\"text\"\n          id=\"registerLoginInput\"\n          placeholder=\"введите логин\"\n          onChange={(e) => {\n            setLogin(e.target.value);\n          }}\n          value={login}\n          required\n        />\n        <label> Пароль: </label>\n        <input\n          type=\"password\"\n          id=\"registePasswordInput\"\n          placeholder=\"введите ваш пароль\"\n          onChange={(e) => {\n            setPassword(e.target.value);\n          }}\n          value={password}\n          required\n        ></input>\n        <label> Повторите пароль: </label>\n        <input\n          type=\"password\"\n          id=\"registePasswordInput\"\n          placeholder=\"введите пароль повторно\"\n          onChange={(e) => {\n            setRepeatPassword(e.target.value);\n          }}\n          value={repeatPassword}\n          required\n        ></input>\n        <button>Регистрация</button>\n        <div>{authStatus}</div>\n      </form>\n    </>\n  );\n};\n\nexport default RegisterForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}