{"ast":null,"code":"import { useEffect, useContext, useRef } from 'react';\nimport { warn } from './debug';\nimport { COMMAND } from './keepAliveDecorator';\nimport IdentificationContext from '../contexts/IdentificationContext';\nexport default function useKeepAliveEffect(effect) {\n  if (!useEffect) {\n    warn('[React Keep Alive] useKeepAliveEffect API requires react 16.8 or later.');\n  }\n  var _a = useContext(IdentificationContext),\n    eventEmitter = _a.eventEmitter,\n    identification = _a.identification;\n  var effectRef = useRef(effect);\n  effectRef.current = effect;\n  useEffect(function () {\n    var bindActivate = null;\n    var bindUnactivate = null;\n    var bindUnmount = null;\n    var effectResult = effectRef.current();\n    var unmounted = false;\n    eventEmitter.on([identification, COMMAND.ACTIVATE], bindActivate = function () {\n      // Delayed update\n      Promise.resolve().then(function () {\n        effectResult = effectRef.current();\n      });\n      unmounted = false;\n    }, true);\n    eventEmitter.on([identification, COMMAND.UNACTIVATE], bindUnactivate = function () {\n      if (effectResult) {\n        effectResult();\n        unmounted = true;\n      }\n    }, true);\n    eventEmitter.on([identification, COMMAND.UNMOUNT], bindUnmount = function () {\n      if (effectResult) {\n        effectResult();\n        unmounted = true;\n      }\n    }, true);\n    return function () {\n      if (effectResult && !unmounted) {\n        effectResult();\n      }\n      eventEmitter.off([identification, COMMAND.ACTIVATE], bindActivate);\n      eventEmitter.off([identification, COMMAND.UNACTIVATE], bindUnactivate);\n      eventEmitter.off([identification, COMMAND.UNMOUNT], bindUnmount);\n    };\n  }, []);\n}","map":{"version":3,"names":["useEffect","useContext","useRef","warn","COMMAND","IdentificationContext","useKeepAliveEffect","effect","_a","eventEmitter","identification","effectRef","current","bindActivate","bindUnactivate","bindUnmount","effectResult","unmounted","on","ACTIVATE","Promise","resolve","then","UNACTIVATE","UNMOUNT","off"],"sources":["/media/starrynight/main_pt/projects_linux/blog_website/frontend/blog-website/node_modules/react-keep-alive/es/utils/useKeepAliveEffect.js"],"sourcesContent":["import { useEffect, useContext, useRef } from 'react';\r\nimport { warn } from './debug';\r\nimport { COMMAND } from './keepAliveDecorator';\r\nimport IdentificationContext from '../contexts/IdentificationContext';\r\nexport default function useKeepAliveEffect(effect) {\r\n    if (!useEffect) {\r\n        warn('[React Keep Alive] useKeepAliveEffect API requires react 16.8 or later.');\r\n    }\r\n    var _a = useContext(IdentificationContext), eventEmitter = _a.eventEmitter, identification = _a.identification;\r\n    var effectRef = useRef(effect);\r\n    effectRef.current = effect;\r\n    useEffect(function () {\r\n        var bindActivate = null;\r\n        var bindUnactivate = null;\r\n        var bindUnmount = null;\r\n        var effectResult = effectRef.current();\r\n        var unmounted = false;\r\n        eventEmitter.on([identification, COMMAND.ACTIVATE], bindActivate = function () {\r\n            // Delayed update\r\n            Promise.resolve().then(function () {\r\n                effectResult = effectRef.current();\r\n            });\r\n            unmounted = false;\r\n        }, true);\r\n        eventEmitter.on([identification, COMMAND.UNACTIVATE], bindUnactivate = function () {\r\n            if (effectResult) {\r\n                effectResult();\r\n                unmounted = true;\r\n            }\r\n        }, true);\r\n        eventEmitter.on([identification, COMMAND.UNMOUNT], bindUnmount = function () {\r\n            if (effectResult) {\r\n                effectResult();\r\n                unmounted = true;\r\n            }\r\n        }, true);\r\n        return function () {\r\n            if (effectResult && !unmounted) {\r\n                effectResult();\r\n            }\r\n            eventEmitter.off([identification, COMMAND.ACTIVATE], bindActivate);\r\n            eventEmitter.off([identification, COMMAND.UNACTIVATE], bindUnactivate);\r\n            eventEmitter.off([identification, COMMAND.UNMOUNT], bindUnmount);\r\n        };\r\n    }, []);\r\n}\r\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,UAAU,EAAEC,MAAM,QAAQ,OAAO;AACrD,SAASC,IAAI,QAAQ,SAAS;AAC9B,SAASC,OAAO,QAAQ,sBAAsB;AAC9C,OAAOC,qBAAqB,MAAM,mCAAmC;AACrE,eAAe,SAASC,kBAAkBA,CAACC,MAAM,EAAE;EAC/C,IAAI,CAACP,SAAS,EAAE;IACZG,IAAI,CAAC,yEAAyE,CAAC;EACnF;EACA,IAAIK,EAAE,GAAGP,UAAU,CAACI,qBAAqB,CAAC;IAAEI,YAAY,GAAGD,EAAE,CAACC,YAAY;IAAEC,cAAc,GAAGF,EAAE,CAACE,cAAc;EAC9G,IAAIC,SAAS,GAAGT,MAAM,CAACK,MAAM,CAAC;EAC9BI,SAAS,CAACC,OAAO,GAAGL,MAAM;EAC1BP,SAAS,CAAC,YAAY;IAClB,IAAIa,YAAY,GAAG,IAAI;IACvB,IAAIC,cAAc,GAAG,IAAI;IACzB,IAAIC,WAAW,GAAG,IAAI;IACtB,IAAIC,YAAY,GAAGL,SAAS,CAACC,OAAO,CAAC,CAAC;IACtC,IAAIK,SAAS,GAAG,KAAK;IACrBR,YAAY,CAACS,EAAE,CAAC,CAACR,cAAc,EAAEN,OAAO,CAACe,QAAQ,CAAC,EAAEN,YAAY,GAAG,SAAAA,CAAA,EAAY;MAC3E;MACAO,OAAO,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,YAAY;QAC/BN,YAAY,GAAGL,SAAS,CAACC,OAAO,CAAC,CAAC;MACtC,CAAC,CAAC;MACFK,SAAS,GAAG,KAAK;IACrB,CAAC,EAAE,IAAI,CAAC;IACRR,YAAY,CAACS,EAAE,CAAC,CAACR,cAAc,EAAEN,OAAO,CAACmB,UAAU,CAAC,EAAET,cAAc,GAAG,SAAAA,CAAA,EAAY;MAC/E,IAAIE,YAAY,EAAE;QACdA,YAAY,CAAC,CAAC;QACdC,SAAS,GAAG,IAAI;MACpB;IACJ,CAAC,EAAE,IAAI,CAAC;IACRR,YAAY,CAACS,EAAE,CAAC,CAACR,cAAc,EAAEN,OAAO,CAACoB,OAAO,CAAC,EAAET,WAAW,GAAG,SAAAA,CAAA,EAAY;MACzE,IAAIC,YAAY,EAAE;QACdA,YAAY,CAAC,CAAC;QACdC,SAAS,GAAG,IAAI;MACpB;IACJ,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,YAAY;MACf,IAAID,YAAY,IAAI,CAACC,SAAS,EAAE;QAC5BD,YAAY,CAAC,CAAC;MAClB;MACAP,YAAY,CAACgB,GAAG,CAAC,CAACf,cAAc,EAAEN,OAAO,CAACe,QAAQ,CAAC,EAAEN,YAAY,CAAC;MAClEJ,YAAY,CAACgB,GAAG,CAAC,CAACf,cAAc,EAAEN,OAAO,CAACmB,UAAU,CAAC,EAAET,cAAc,CAAC;MACtEL,YAAY,CAACgB,GAAG,CAAC,CAACf,cAAc,EAAEN,OAAO,CAACoB,OAAO,CAAC,EAAET,WAAW,CAAC;IACpE,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;AACV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}